(this["webpackJsonpswitchon-assessment"]=this["webpackJsonpswitchon-assessment"]||[]).push([[4],{141:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(162),r=a.n(n),c=a(163),l=function(){var e={"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache",Pragma:"no-cache"};return e};function s(e,t,a){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t,a,n){var c,s,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GET"!==a){e.next=10;break}return e.next=3,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_APP_URL+t);case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.next=12,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_APP_URL+t,{method:a,headers:l(),body:JSON.stringify(n)});case 12:return o=e.sent,e.next=15,o.json();case 15:return i=e.sent,e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},149:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(201),l=a(200),s=(a(150),c.a.Option),o=l.a.TextArea;t.a=function(e){return"select"===e.type?r.a.createElement("div",{className:"field field--".concat(e.name)},r.a.createElement("div",{className:"field__label label--".concat(e.name)},e.label," ",r.a.createElement("span",{className:"field__label__astrek"},"*")),r.a.createElement(c.a,{showSearch:!0,style:{width:200},placeholder:e.optionPlaceholder,optionFilterProp:"children",onChange:function(t,a){return e.onChange(e.name,t)},disabled:e.selectFieldDisabled},e.optionData&&e.optionData.map((function(e){return r.a.createElement(s,{value:e.value},e.label)})))):"textArea"===e.type?r.a.createElement("div",{className:"field field--".concat(e.name)},r.a.createElement("div",{className:"field__label label--".concat(e.name)},e.label," ",r.a.createElement("span",{className:"field__label__astrek"},"*")),r.a.createElement(o,{rows:e.textAreaRows,onChange:function(t){return e.onChange(e.name,t.target.value)}})):r.a.createElement("div",{className:"field field--".concat(e.name)},r.a.createElement("div",{className:"field__label label--".concat(e.name)},e.label," ",r.a.createElement("span",{className:"field__label__astrek"},"*")),r.a.createElement(l.a,{placeholder:e.placeholder,type:e.type,name:e.name,onChange:function(t){return e.onChange(e.name,t.target.value)}}),e.errorMessage?r.a.createElement("div",{className:"field__errorMessage"},e.errorMessage):null)}},150:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){e.exports=a.p+"static/media/no-data.3d13a36e.svg"},202:function(e,t,a){"use strict";a.r(t);var n=a(142),r=a(0),c=a.n(r),l=a(12);var s=Object(l.g)((function(e){return c.a.createElement("div",{className:"toolbar shadow"},c.a.createElement("div",{className:"toolbar__logo"},c.a.createElement("img",{src:"https://switchon.io/img/website_logo.png",alt:""})),c.a.createElement("div",{className:"toolbar__logout",onClick:function(){sessionStorage.clear(),e.history.push("/login")}},"Logout"))})),o=a(148),i=a(151),m=(a(193),a(149)),u=a(141);var d=function(e){var t=Object(r.useState)(),a=Object(n.a)(t,2),l=a[0],s=a[1],d=Object(r.useState)(!0),_=Object(n.a)(d,2),f=_[0],b=_[1],p=Object(r.useState)(),v=Object(n.a)(p,2),E=v[0],h=v[1],O=Object(r.useState)(),N=Object(n.a)(O,2),S=N[0],g=N[1];function j(e,t){s((function(a){return Object(i.a)({},a,Object(o.a)({},e,t))})),"department"===e&&t&&h(t)}return Object(r.useEffect)((function(){l&&l.department&&Object(u.a)("/user/department/"+E,"GET").then((function(e){e&&g(e.data.map((function(e){return{label:e.emailId,value:e.emailId}}))),b(!1)}))}),[E]),e.departentOptions?c.a.createElement("div",{className:e.showPopupForm?"formPopup shadow":"formPopup hide"},c.a.createElement("div",{className:"formPopup__header"},"Create your Request"),e.showMessage?c.a.createElement("div",{className:"formPopup__header__formMsg"},e.showMessage):null,c.a.createElement(m.a,{name:"department",type:"select",optionData:e.departentOptions,label:"Select Department",optionPlaceholder:"Select department",onChange:j}),c.a.createElement(m.a,{name:"email",type:"select",optionData:S,label:"Enter your Email",optionPlaceholder:"Enter your Email",onChange:j,selectFieldDisabled:f}),c.a.createElement(m.a,{name:"comments",type:"textArea",label:"Comments",textAreaRows:9,onChange:j}),c.a.createElement("div",{className:"formPopup__button",onClick:function(){return e.onSendRequest(l)}},"Send Request"),c.a.createElement("div",{className:"formPopup__closeButton",onClick:e.onClickClose},"X")):c.a.createElement("p",null,"loading")};var _=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),l=a[0],s=a[1],o=Object(r.useState)(""),i=Object(n.a)(o,2),m=i[0],_=i[1],f=Object(r.useState)([]),b=Object(n.a)(f,2),p=b[0],v=b[1];return Object(r.useEffect)((function(){var t=[];[{label:"Maths",value:"maths"},{label:"History",value:"history"},{label:"Chemistry",value:"chemistry"},{label:"Biology",value:"biology"},{label:"Physics",value:"physics"}].map((function(a){a.value.toLowerCase()!==e.userDetail.department.toLowerCase()&&t.push(a)})),v(t)}),[]),c.a.createElement("div",{className:"infoSection"},c.a.createElement("div",{className:"infoSection__userinfo"},c.a.createElement("p",{className:"infoSection__userinfo__header"},c.a.createElement("span",{className:"infoSection__userinfo__header__label--hi"},"Hi "),c.a.createElement("span",{className:"infoSection__userinfo__header__label--name"}," ",e.userDetail.firstName),c.a.createElement("div",{className:"infoSection__button shadow",onClick:function(){s(!l)}},"Create Form")),c.a.createElement("p",{className:"infoSection__userinfo__subtitle"},e.userDetail.department," Department")),c.a.createElement("div",{className:"infoSection__img"},c.a.createElement("img",{src:"https://d3n32ilufxuvd1.cloudfront.net/5c8792f4cdf6a301a044dfab/1433684/upload-0c8526b7-5f57-4efd-b350-6806c4d7a226.png",alt:""})),c.a.createElement("div",{className:l?"infoSection__formContainer darkbackground":"infoSection__formContainer"}),c.a.createElement(d,{showPopupForm:l,onClickClose:function(){s(!l)},onSendRequest:function(t){if(t&&t.comments&&t.department&&t.email){var a={userName:e.userDetail.firstName,description:t.comments,status:"Pending",assignedToDepartment:t.department,createdBy:e.userDetail.emailId,assignedTo:t.email,createdByDepartment:e.userDetail.department};Object(u.a)("/form/","POST",a).then((function(e){e.isError?_("Error occured"):(_("Request sent successfully"),setTimeout((function(){s(!l)}),1e3))}))}else _("Fill all details")},showMessage:m,departentOptions:p}))};a(194),a(195);function f(e){var t=Object(r.useState)("tablerow__confirmBox"),a=Object(n.a)(t,2),l=a[0],s=a[1],o=Object(r.useState)(),i=Object(n.a)(o,2),m=i[0],u=i[1];function d(t){e.confirmBox&&(s("tablerow__confirmBox hide"),u(t),e.onSubmitRequest(t))}return Object(r.useEffect)((function(){e.sticker&&u(e.sticker)}),[e.sticker]),c.a.createElement("div",{className:"tablerow"},c.a.createElement("div",{className:"tablerow__title"},e.title),c.a.createElement("div",{className:"tablerow__section"},e.items&&e.items.map((function(e){if("Id"!==e.label&&"Status"!==e.label&&"formId"!==e.label)return c.a.createElement("div",{className:"tablerow__section__item"},c.a.createElement("div",{className:"tablerow__section__item__header"},e.label),c.a.createElement("div",{className:"tablerow__section__item__value"},e.value))})),function(){if(e.sticker)return c.a.createElement("div",{className:"tablerow__section__item"},c.a.createElement("div",{className:"tablerow__section__item__header"},"Status"),c.a.createElement("div",{className:"tablerow__section__item__sticker sticker--".concat(m)},m))}()),function(){if(e.confirmBox&&"Pending"===e.sticker)return c.a.createElement("div",{className:l},c.a.createElement("div",{className:"tablerow__confirmBox__button",onClick:function(){return d("APPROVED")}},c.a.createElement("div",{className:"tablerow__confirmBox__button--accept"},"Accept request")),c.a.createElement("div",{className:"tablerow__confirmBox__button",onClick:function(){return d("REJECTED")}},c.a.createElement("div",{className:"tablerow__confirmBox__button--cancelled"},"Cancel request")))}())}f.prototype={confirmBox:!1};var b=f;a(196);var p=function(e){return c.a.createElement("div",{className:"empty-data-error-page"},c.a.createElement("img",{className:"empty-data-img",src:e.errorImage}),c.a.createElement("p",{className:"empty-data-header-msg"},e.mainText),c.a.createElement("p",{className:"empty-data-error-message"},e.subText))},v=a(197),E=a.n(v),h=[{label:"Department Requests",value:"departmentForms"},{label:"Requested Forms",value:"requestedForms"},{label:"Recieved Forms",value:"recieved Forms"}];function O(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a]);return t}var N=function(e){var t=Object(r.useState)(0),a=Object(n.a)(t,2),l=a[0],s=a[1],o=Object(r.useState)([]),i=Object(n.a)(o,2),m=i[0],d=i[1],_=Object(r.useState)([]),f=Object(n.a)(_,2),v=f[0],N=f[1],S=Object(r.useState)([]),g=Object(n.a)(S,2),j=g[0],C=g[1],D=Object(r.useState)(!0),w=Object(n.a)(D,2);function y(e){return l===e?"table__tabSection__tabs--active shadow":"table__tabSection__tabs"}function P(e){var t=[];return e&&e.map((function(e){var a=[{label:"Requested From",value:e.createdBy},{label:"From Department",value:e.createdByDepartment},{label:"Requested To",value:e.assignedTo},{label:"Description",value:e.description},{label:"To Department",value:e.assignedToDepartment},{label:"Status",value:e.status},{label:"formId",value:e.formId},{label:"Id",value:e._id}];t.push(a)})),t}return w[0],w[1],Object(r.useEffect)((function(){N(P(e.userDetail.departmentForms))}),[]),c.a.createElement("div",{className:"table"},c.a.createElement("div",{className:"table__title"},"Forms in this Department: "),c.a.createElement("div",{className:"table__tabSection"},h&&h.map((function(t,a){return c.a.createElement("div",{className:y(a),onClick:function(){return function(t,a){s(a),0===a?N(P(e.userDetail.departmentForms)):1===a?d(P(e.userDetail.requestedForms)):C(P(e.userDetail.recievedForms))}(0,a)}},t.label)}))),c.a.createElement("div",{className:"table__wrapper shadow"},function(){var e;return(e=O(0===l?v:1===l?m:j))&&0===e.length?c.a.createElement(p,{mainText:"Sorry!",subText:"No data found",errorImage:E.a}):e&&e.map((function(e){var t=2===l;return c.a.createElement(b,{title:e[6].value,items:e,confirmBox:t,sticker:e[5].value,onSubmitRequest:function(t){return function(e,t){var a={id:t[7].value,status:e,assignedToDepartment:t[4].value,createdBy:t[0].value,assignedTo:t[2].value,createdByDepartment:t[1].value,formId:t[6].value};Object(u.a)("/form/update","POST",a).then((function(e){}))}(t,e)}})}))}()))},S=a(60);t.default=Object(l.g)((function(e){var t=Object(r.useState)(),a=Object(n.a)(t,2),l=a[0],o=a[1];return Object(r.useEffect)((function(){var e=sessionStorage.getItem("userDetailId");e&&o(JSON.parse(e)),e&&Object(u.a)("/user/"+JSON.parse(e),"GET").then((function(e){o(e)}))}),[]),l?l.data?c.a.createElement("div",{className:"homePage"},c.a.createElement(s,null),c.a.createElement(_,{userDetail:l.data}),c.a.createElement(N,{userDetail:l.data})):c.a.createElement("p",{className:"Loading"}):c.a.createElement(S.a,null)}))}}]);
//# sourceMappingURL=4.86b9346d.chunk.js.map